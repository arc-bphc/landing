<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link href="/static/favicons/favicon.ico" rel="shortcut icon"/><link href="/static/favicons/site.webmanifest" rel="manifest"/><link href="/static/favicons/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/><link href="/static/favicons/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="/static/favicons/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link color="#111827" href="/static/favicons/safari-pinned-tab.svg" rel="mask-icon"/><meta content="#111827" name="theme-color"/><meta content="#ffffff" name="msapplication-TileColor"/><meta content="/static/favicons/browserconfig.xml" name="msapplication-config"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><title>LED Matrix || ARC</title><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/github-dark.min.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" integrity="sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs" crossorigin="anonymous"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/8db5bf205ea37cf1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8db5bf205ea37cf1.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-bad78d8784d7438a.js" defer=""></script><script src="/_next/static/chunks/framework-ee8b8a1914c4e423.js" defer=""></script><script src="/_next/static/chunks/main-dc7bfb8c378ee046.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8e700d82b1e19a18.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-c4781dc8b521ebb7.js" defer=""></script><script src="/_next/static/StFUEQfHxZAGBwgxCGBgG/_buildManifest.js" defer=""></script><script src="/_next/static/StFUEQfHxZAGBwgxCGBgG/_ssgManifest.js" defer=""></script><script src="/_next/static/StFUEQfHxZAGBwgxCGBgG/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Roboto+Mono:wght@300;400;600;700&display=swap">@font-face{font-family:'Inter';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyeMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuDyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuOKfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuI6fMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuFuYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuDyYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuBWYMZs.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_gPqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_AP2PQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_Of2PQA.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:200;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v7/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhGq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhPq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhIq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhEq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhFq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhLq3-cXbKD.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhGq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhPq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhIq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhEq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhFq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhLq3-cXbKD.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhGq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhPq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhIq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhEq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhFq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhLq3-cXbKD.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhGq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhPq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhIq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhEq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhFq3-cXbKDO1w.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0x5DF4xlVMF-BfR8bXMIjhLq3-cXbKD.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body class="bg-gray-900 text-white"><div id="__next" data-reactroot=""><div class="fixed w-full bg-gray-900/75 backdrop-blur"><div class="relative visible md:hidden h-20 flex items-center z-50 bg-gray-900"><div class="px-10 flex flex-col space-y-10 w-full"><div class="flex justify-between w-full items-center"><button aria-label="Toggle menu" type="button" class="mobile-menu_burger__wvd0z"><svg class="h-7 w-7 absolute text-gray-900 dark:text-gray-100" width="20" height="20" viewBox="0 0 20 20" fill="none" data-hide="false"><path d="M2.5 7.5H17.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.5 12.5H17.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg><svg class="h-7 w-7 absolute text-gray-900 dark:text-gray-100" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision" data-hide="true"><path d="M18 6L6 18"></path><path d="M6 6l12 12"></path></svg></button><div class=""><div class="w-full"><button class="font-normal text-rose-50 py-2 hover:text-rose-500 transition-all">Home</button></div></div></div></div></div><div class="px-8 md:p-0 sm:max-w-2xl xl:max-w-5xl mx-auto flex flex-col"><nav class="hidden md:flex md:justify-between h-20 items-center"><div class=""><a class="font-normal text-rose-50 sm:py-2 rounded-lg hover:text-rose-500 transition-all " href="/"><img src="/static/images/logo.png" alt="logo" class="w-16"/></a></div><div class="flex gap-x-3"><a class="font-normal text-rose-50 sm:py-2 rounded-lg hover:text-rose-500 transition-all " href="/about">About</a><a class="font-normal text-rose-50 sm:py-2 rounded-lg hover:text-rose-500 transition-all " href="/blog">Blog</a><a class="font-normal text-rose-50 sm:py-2 rounded-lg hover:text-rose-500 transition-all " href="/news">News</a><a class="font-normal text-rose-50 sm:py-2 rounded-lg hover:text-rose-500 transition-all " href="/levelup">Level Up</a><a class="font-normal text-rose-50 sm:py-2 rounded-lg hover:text-rose-500 transition-all " href="/contact">Contact</a></div></nav></div></div><div class="px-8 md:p-0 sm:max-w-2xl xl:max-w-5xl mx-auto flex flex-col"><div class="mt-24 flex flex-col"><h1 class="text-5xl font-semibold">LED Matrix</h1><div class="flex justify-between items-center mt-3"><div class="flex gap-x-3 items-center"><span class="text-sm text-gray-300">Dec 5, 2021</span><div class="flex gap-x-1 items-center flex-wrap"><div class="text-primary-200 text-xs font-semibold bg-primary-800 border-[1px] border-primary-300 px-2 py-0.5 rounded-xl">arduino</div><div class="text-primary-200 text-xs font-semibold bg-primary-800 border-[1px] border-primary-300 px-2 py-0.5 rounded-xl">neopixel</div><div class="text-primary-200 text-xs font-semibold bg-primary-800 border-[1px] border-primary-300 px-2 py-0.5 rounded-xl">audio</div></div></div><div class="text-sm text-primary-300">6 min read</div></div><div class="border-l-4 border-rose-100 bg-gray-800 mt-8 px-4 py-5 text-primary-200">Create a music waveform visualiser using a Pixel Matrix. We use Fast Fourier Transforms, simple micro-controllers and basic hardware components.</div><div class="mt-8 prose prose-invert max-w-none"><h2 id="table-of-contents"><a class="anchor" href="#table-of-contents"><span class="icon icon-link"></span></a>Table of Contents</h2>
<ol>
<li><a class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="#fast-fourier-transformfft">Fast Fourier Transform(FFT)</a></li>
<li><a class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="#sampling-frequency-and-nyquist-theorem">Sampling Frequency and Nyquist Theorem</a></li>
<li><a class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="#number-of-samples">Number of Samples</a></li>
<li><a class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="#implementation">Implementation:</a></li>
<li><a class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="#results-of-fft">Results of FFT:</a>
<ol>
<li><a class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="#implementation-1">Implementation:</a></li>
</ol>
</li>
<li><a class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="#fastled-in-a-nutshell">FastLED in a nutshell</a>
<ol>
<li><a class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="#writing-to-an-led">Writing to an LED</a></li>
</ol>
</li>
<li><a class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="#resources">Resources:</a></li>
<li><a class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="#testing">Testing:</a></li>
</ol>
<h2 id="fast-fourier-transformfft"><a class="anchor" href="#fast-fourier-transformfft"><span class="icon icon-link"></span></a>Fast Fourier Transform(FFT)</h2>
<p>FFT is based on the principle that any signal(periodic or not) can be reconstructed by adding sinusoidal waves of different frequencies and amplitudes. Now FFT does this in reverse, where it splits an already existing wave into sinusoidal signals i.e the frequencies the wave contains.</p>
<img alt="1" class="rounded-lg" src="/static/images/blog/led-matrix/1.png" width="auto" height="auto"/>
<img alt="2" class="rounded-lg" src="/static/images/blog/led-matrix/2.png" width="auto" height="auto"/>
<p>Thus, we make use of FFT to identify which frequencies are present in any analog signal and also see which of those frequencies are the most dominating.
Coming to applying FFT to our audio visualiser, when we feed in an audio signal into an FFT we can find out the relative strengths of the frequencies.</p>
<p>Now let’s take a look at how FFT is applied.</p>
<h2 id="sampling-frequency-and-nyquist-theorem"><a class="anchor" href="#sampling-frequency-and-nyquist-theorem"><span class="icon icon-link"></span></a>Sampling Frequency and Nyquist Theorem</h2>
<p>Sampling frequency is the number of times we sample the wave per second.</p>
<p>The Nyquist-Shannon Sampling Theorem tells us that to be able to sample a signal, the sampling frequency needs to be at least twice the frequency of the signal we’re trying to sample.
In other words, the FFT will only be able to detect frequencies up to half the sampling frequency.</p>
<p>To explain how this works let’s use an example:</p>
<p>Say we want to sample an audio signal 10,000 times per second, i.e.
<strong>Sampling frequency =10,000Hz.</strong></p>
<ul>
<li>Now we want to see how many samples we can record from a wave of a certain frequency.
If we take a 2kHz wave, the number of samples we get is 10,000/2000=5 samples per wave.
Thus for a wave of this frequency, 5 samples per wave is good enough to recreate the wave.</li>
<li>Now if we consider a wave of frequency 5kHz, we see that we only get 2 samples per wave.</li>
<li>Furthermore, if we take a wave of frequency 10kHz we see that we only get 1 sample per wave, and the signal can no longer be reconstructed as it results in a straight line.</li>
<li>Thus this is where the Nyquist theorem comes in and says that the maximum frequency we are able to sample is half of the sampling frequency.</li>
</ul>
<img alt="3" class="rounded-lg" src="/static/images/blog/led-matrix/3.png" width="auto" height="auto"/>
<h2 id="number-of-samples"><a class="anchor" href="#number-of-samples"><span class="icon icon-link"></span></a>Number of Samples</h2>
<p>The FFT algorithm works with a finite number of samples. This number needs to be 2n where n is an integer (resulting in 32, 64, 128, etc). The larger this number is, the slower the algorithm will be. However, with many samples, you will get a larger resolution for the results.</p>
<img alt="4" class="rounded-lg" src="/static/images/blog/led-matrix/4.png" width="auto" height="auto"/>
<h2 id="implementation"><a class="anchor" href="#implementation"><span class="icon icon-link"></span></a>Implementation:</h2>
<p>We can implement FFT into our projects conveniently using the arduinoFFT.h library, the documentation for which can be found online.
arduinoFFT - Arduino Reference</p>
<h2 id="results-of-fft"><a class="anchor" href="#results-of-fft"><span class="icon icon-link"></span></a>Results of FFT:</h2>
<p>After we have achieved the results of FFT, we now have to understand them.
Let’s say we used 16 samples and a sampling rate of 40kHz</p>
<p>Since we use 16 samples we get 16 bins.</p>
<p>The term bins is related to the result of the FFT, where every element in the result array is a bin. One can say this is the “resolution” of the FFT. Every bin represents a frequency interval, just like a histogram. The number of bins you get to use is half the amount of samples spanning the frequency range from zero to half the sampling rate as the other half of the values are negative and meaningless.</p>
<p>In practicality, we can’t use the first bin either as this is swapped by DC. SO we only get to use 7 bins in the end for this case.</p>
<p>We can now map the bins as we wish to the number of bands we require.
For an audio signal, all the interesting stuff is towards the low end.
To help us do the calculations in mapping the bins to the bands, we can make use of the following spreadsheet. ( Courtesy: Scott Marley)</p>
<p><a target="_blank" rel="noopener noreferrer" class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="https://github.com/s-marley/ESP32_FFT_VU/blob/master/FFT.xlsx">https://github.com/s-marley/ESP32_FFT_VU/blob/master/FFT.xlsx</a></p>
<h3 id="implementation-1"><a class="anchor" href="#implementation-1"><span class="icon icon-link"></span></a>Implementation:</h3>
<p>We can implement FFT into our projects conveniently using the arduinoFFT.h library, the documentation for which can be found online.
arduinoFFT - Arduino Reference
Results of FFT:
After we have achieved the results of FFT, we now have to understand them.
Let’s say we used 16 samples and a sampling rate of 40kHz.
Since we use 16 samples we get 16 bins.
The term bins is related to the result of the FFT, where every element in the result array is a bin. One can say this is the “resolution” of the FFT. Every bin represents a frequency interval, just like a histogram. The number of bins you get to use is half the amount of samples spanning the frequency range from zero to half the sampling rate as the other half of the values are negative and meaningless.
In practicality, we can’t use the first bin either as this is swapped by DC. SO we only get to use 7 bins in the end for this case.
We can now map the bins as we wish to the number of bands we require.
For an audio signal, all the interesting stuff is towards the low end. To help us do the calculations in mapping the bins to the bands, we can make use of the following spreadsheet.</p>
<p>Now that we have understood the theory we can apply it to our code.</p>
<h2 id="fastled-in-a-nutshell"><a class="anchor" href="#fastled-in-a-nutshell"><span class="icon icon-link"></span></a>FastLED in a nutshell</h2>
<p>FastLED is a fast, efficient, easy-to-use Arduino library for programming addressable LED strips and pixels such as WS2810, WS2811,
LPD8806, Neopixel and more. In this project we have used WS2812B LED strip. The first step is to include the library and define constants.</p>
<pre><code class="hljs language-C"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;FastLED.h&gt;</span></span>
define NUM_LEDS <span class="hljs-number">64</span> <span class="hljs-comment">// number of leds in the matrix</span>
define DATA_PIN <span class="hljs-number">4</span>
Next, we <span class="hljs-built_in">set</span> up an <span class="hljs-built_in">array</span> to store the LED data.

CRGB leds[NUM_LEDS]
</code></pre>
<p>Then, we setup the LEDs.</p>
<pre><code class="hljs language-scss">void <span class="hljs-built_in">setup</span>() {
    FastLED<span class="hljs-selector-class">.addLeds</span>(WS2812B, DATA_PIN)(leds, NUM_LEDS);
}
</code></pre>
<h3 id="writing-to-an-led"><a class="anchor" href="#writing-to-an-led"><span class="icon icon-link"></span></a>Writing to an LED</h3>
<pre><code class="hljs language-C"><span class="hljs-type">void</span> <span class="hljs-title hljs-function">loop</span><span class="hljs-params">()</span>{
    leds[<span class="hljs-number">0</span>] = CRGB::Red;
    FastLED.show();
    delay(<span class="hljs-number">50</span>);
}
</code></pre>
<p>This will set the first led to red. To make it blink, we can change the code to this</p>
<pre><code class="hljs language-scss">void <span class="hljs-built_in">loop</span>() {
    leds<span class="hljs-selector-attr">[0]</span> = CRGB::Red; FastLED<span class="hljs-selector-class">.show</span>();
    <span class="hljs-built_in">delay</span>(<span class="hljs-number">500</span>);
    leds<span class="hljs-selector-attr">[0]</span> = CRGB::Black;
    FastLED<span class="hljs-selector-class">.show</span>();
    <span class="hljs-built_in">delay</span>(<span class="hljs-number">500</span>);
}
</code></pre>
<p><strong>For writing to multiple LEDS, we can use loops.</strong></p>
<pre><code class="hljs language-C"><span class="hljs-type">void</span> <span class="hljs-title hljs-function">loop</span><span class="hljs-params">()</span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;NUM_LEDS; i++){ leds[i] = CRGB::Red;
FastLED.show(); delay(<span class="hljs-number">50</span>); } }
</code></pre>
<p>You can also display various patterns using FastLED.
For more details, refer:</p>
<h2 id="resources"><a class="anchor" href="#resources"><span class="icon icon-link"></span></a>Resources:</h2>
<p>Scott Marley&#x27;s <a target="_blank" rel="noopener noreferrer" class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="https://github.com/s-marley">github</a> is an amazing resource for all things FastLED. He also has a <a target="_blank" rel="noopener noreferrer" class="text-rose-500 hover:text-rose-400 underline underline-offset-4 decoration-dotted transition-colors" href="https://www.youtube.com/c/ScottMarley/playlists">youtube channel</a> explaining his projects.</p>
<h2 id="testing"><a class="anchor" href="#testing"><span class="icon icon-link"></span></a>Testing:</h2></div></div></div><div class="px-8 md:p-0 sm:max-w-2xl xl:max-w-5xl mx-auto flex flex-col"><div class="mt-24 py-10 border-t-[1px] border-primary-300 flex flex-col gap-16"><div class="grid grid-cols-1 md:grid-cols-3 md:grid-rows-3 gap-x-1 gap-y-8"><div class="col-span-1 md:row-span-full flex flex-col gap-y-5 items-center md:items-start"><a class="text-rose-50 hover:text-rose-500 transition-colors" href="/about">About</a><a class="text-rose-50 hover:text-rose-500 transition-colors" href="/blog">Blog</a><a class="text-rose-50 hover:text-rose-500 transition-colors" href="/news">News</a><a class="text-rose-50 hover:text-rose-500 transition-colors" href="/levelup">Level Up</a><a class="text-rose-50 hover:text-rose-500 transition-colors" href="/contact">Contact</a></div><div class="col-span-1 row-span-1 md:col-start-2 flex gap-x-5 justify-center items-center md:justify-start md:items-start"><a href="https://github.com/arc-bphc" class="text-rose-50 hover:text-rose-500 transition-colors h-6 w-6"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="h-6 w-6" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="https://www.facebook.com/automationandroboticsclub" class="text-rose-50 hover:text-rose-500 transition-colors h-6 w-6"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="h-6 w-6" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></a></div><div class="col-span-1 md:row-span-2 md:col-start-2"><div class="flex flex-col gap-y-1 items-center justify-center md:items-start"><span>Contact us at</span><a class="text-rose-400 hover:text-rose-500 underline underline-offset-4 decoration-dotted transition-colors" href="mailto:arc@hyderabad.bits-pilani.ac.in">arc@hyderabad.bits-pilani.ac.in</a></div></div><div class="col-span-1 md:row-span-1 md:col-start-3 md:row-start-1 flex flex-col items-center md:items-start justify-center md:justify-between text-gray-400 text-sm"><span>BITS Pilani Hyderabad Campus</span><span>Secunderabad, Telangana 500078</span></div><div class="col-span-1 md:row-span-2 md:col-start-3 md:row-start-2 flex items-center justify-center md:justify-start"><a href="https://www.bits-pilani.ac.in/hyderabad/"><img src="/static/images/bits.png" alt="BITS Pilani" class="h-20 object-contain"/></a></div></div><span class="text-gray-400 mx-auto">© 2022 Automation &amp; Robotics Club</span></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"LED Matrix","published":"2021-12-05T00:00:00.000Z","summary":"Create a music waveform visualiser using a Pixel Matrix. We use Fast Fourier Transforms, simple micro-controllers and basic hardware components.","tags":["arduino","neopixel","audio"],"body":{"raw":"\n## Table of Contents\n\n## Fast Fourier Transform(FFT)\n\nFFT is based on the principle that any signal(periodic or not) can be reconstructed by adding sinusoidal waves of different frequencies and amplitudes. Now FFT does this in reverse, where it splits an already existing wave into sinusoidal signals i.e the frequencies the wave contains.\n\n\u003cImage\n  src='/static/images/blog/led-matrix/1.png'\n  alt='1'\n  width='auto'\n  height='auto'\n/\u003e\n\n\u003cImage\n  src='/static/images/blog/led-matrix/2.png'\n  alt='2'\n  width='auto'\n  height='auto'\n/\u003e\n\nThus, we make use of FFT to identify which frequencies are present in any analog signal and also see which of those frequencies are the most dominating.\nComing to applying FFT to our audio visualiser, when we feed in an audio signal into an FFT we can find out the relative strengths of the frequencies.\n\nNow let’s take a look at how FFT is applied.\n\n## Sampling Frequency and Nyquist Theorem\n\nSampling frequency is the number of times we sample the wave per second.\n\nThe Nyquist-Shannon Sampling Theorem tells us that to be able to sample a signal, the sampling frequency needs to be at least twice the frequency of the signal we’re trying to sample.\nIn other words, the FFT will only be able to detect frequencies up to half the sampling frequency.\n\nTo explain how this works let’s use an example:\n\nSay we want to sample an audio signal 10,000 times per second, i.e.\n**Sampling frequency =10,000Hz.**\n\n- Now we want to see how many samples we can record from a wave of a certain frequency.\n  If we take a 2kHz wave, the number of samples we get is 10,000/2000=5 samples per wave.\n  Thus for a wave of this frequency, 5 samples per wave is good enough to recreate the wave.\n- Now if we consider a wave of frequency 5kHz, we see that we only get 2 samples per wave.\n- Furthermore, if we take a wave of frequency 10kHz we see that we only get 1 sample per wave, and the signal can no longer be reconstructed as it results in a straight line.\n- Thus this is where the Nyquist theorem comes in and says that the maximum frequency we are able to sample is half of the sampling frequency.\n\n\u003cImage\n  src='/static/images/blog/led-matrix/3.png'\n  alt='3'\n  width='auto'\n  height='auto'\n/\u003e\n\n## Number of Samples\n\nThe FFT algorithm works with a finite number of samples. This number needs to be 2n where n is an integer (resulting in 32, 64, 128, etc). The larger this number is, the slower the algorithm will be. However, with many samples, you will get a larger resolution for the results.\n\n\u003cImage\n  src='/static/images/blog/led-matrix/4.png'\n  alt='4'\n  width='auto'\n  height='auto'\n/\u003e\n\n## Implementation:\n\nWe can implement FFT into our projects conveniently using the arduinoFFT.h library, the documentation for which can be found online.\narduinoFFT - Arduino Reference\n\n## Results of FFT:\n\nAfter we have achieved the results of FFT, we now have to understand them.\nLet’s say we used 16 samples and a sampling rate of 40kHz\n\nSince we use 16 samples we get 16 bins.\n\nThe term bins is related to the result of the FFT, where every element in the result array is a bin. One can say this is the “resolution” of the FFT. Every bin represents a frequency interval, just like a histogram. The number of bins you get to use is half the amount of samples spanning the frequency range from zero to half the sampling rate as the other half of the values are negative and meaningless.\n\nIn practicality, we can’t use the first bin either as this is swapped by DC. SO we only get to use 7 bins in the end for this case.\n\nWe can now map the bins as we wish to the number of bands we require.\nFor an audio signal, all the interesting stuff is towards the low end.\nTo help us do the calculations in mapping the bins to the bands, we can make use of the following spreadsheet. ( Courtesy: Scott Marley)\n\nhttps://github.com/s-marley/ESP32_FFT_VU/blob/master/FFT.xlsx\n\n### Implementation:\n\nWe can implement FFT into our projects conveniently using the arduinoFFT.h library, the documentation for which can be found online.\narduinoFFT - Arduino Reference\nResults of FFT:\nAfter we have achieved the results of FFT, we now have to understand them.\nLet’s say we used 16 samples and a sampling rate of 40kHz.\nSince we use 16 samples we get 16 bins.\nThe term bins is related to the result of the FFT, where every element in the result array is a bin. One can say this is the “resolution” of the FFT. Every bin represents a frequency interval, just like a histogram. The number of bins you get to use is half the amount of samples spanning the frequency range from zero to half the sampling rate as the other half of the values are negative and meaningless.\nIn practicality, we can’t use the first bin either as this is swapped by DC. SO we only get to use 7 bins in the end for this case.\nWe can now map the bins as we wish to the number of bands we require.\nFor an audio signal, all the interesting stuff is towards the low end. To help us do the calculations in mapping the bins to the bands, we can make use of the following spreadsheet.\n\nNow that we have understood the theory we can apply it to our code.\n\n## FastLED in a nutshell\n\nFastLED is a fast, efficient, easy-to-use Arduino library for programming addressable LED strips and pixels such as WS2810, WS2811,\nLPD8806, Neopixel and more. In this project we have used WS2812B LED strip. The first step is to include the library and define constants.\n\n```C\n#include \u003cFastLED.h\u003e\ndefine NUM_LEDS 64 // number of leds in the matrix\ndefine DATA_PIN 4\nNext, we set up an array to store the LED data.\n\nCRGB leds[NUM_LEDS]\n```\n\nThen, we setup the LEDs.\n\n```\nvoid setup() {\n    FastLED.addLeds(WS2812B, DATA_PIN)(leds, NUM_LEDS);\n}\n```\n\n### Writing to an LED\n\n```C\nvoid loop(){\n    leds[0] = CRGB::Red;\n    FastLED.show();\n    delay(50);\n}\n```\n\nThis will set the first led to red. To make it blink, we can change the code to this\n\n```\nvoid loop() {\n    leds[0] = CRGB::Red; FastLED.show();\n    delay(500);\n    leds[0] = CRGB::Black;\n    FastLED.show();\n    delay(500);\n}\n```\n\n**For writing to multiple LEDS, we can use loops.**\n\n```C\nvoid loop(){ for(int i=0; i\u003cNUM_LEDS; i++){ leds[i] = CRGB::Red;\nFastLED.show(); delay(50); } }\n```\n\nYou can also display various patterns using FastLED.\nFor more details, refer:\n\n## Resources:\n\nScott Marley's [github](https://github.com/s-marley) is an amazing resource for all things FastLED. He also has a [youtube channel](https://www.youtube.com/c/ScottMarley/playlists) explaining his projects.\n\n## Testing:\n","code":"var Component=(()=\u003e{var c=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty;var r=s=\u003el(s,\"__esModule\",{value:!0});var f=(s,e)=\u003e()=\u003e(e||s((e={exports:{}}).exports,e),e.exports),g=(s,e)=\u003e{r(s);for(var a in e)l(s,a,{get:e[a],enumerable:!0})},w=(s,e,a)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let i of m(e))!p.call(s,i)\u0026\u0026i!==\"default\"\u0026\u0026l(s,i,{get:()=\u003ee[i],enumerable:!(a=d(e,i))||a.enumerable});return s},b=s=\u003ew(r(l(s!=null?c(u(s)):{},\"default\",s\u0026\u0026s.__esModule\u0026\u0026\"default\"in s?{get:()=\u003es.default,enumerable:!0}:{value:s,enumerable:!0})),s);var o=f((j,h)=\u003e{h.exports=_jsx_runtime});var N={};g(N,{default:()=\u003eF});var n=b(o());function y(s={}){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ol:\"ol\",li:\"li\",p:\"p\",strong:\"strong\",ul:\"ul\",h3:\"h3\",pre:\"pre\",code:\"code\"},s.components),{Image:a,wrapper:i}=e,t=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"table-of-contents\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#table-of-contents\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Table of Contents\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"#fast-fourier-transformfft\",children:\"Fast Fourier Transform(FFT)\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"#sampling-frequency-and-nyquist-theorem\",children:\"Sampling Frequency and Nyquist Theorem\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"#number-of-samples\",children:\"Number of Samples\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"#implementation\",children:\"Implementation:\"})}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"#results-of-fft\",children:\"Results of FFT:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"#implementation-1\",children:\"Implementation:\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"#fastled-in-a-nutshell\",children:\"FastLED in a nutshell\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"#writing-to-an-led\",children:\"Writing to an LED\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"#resources\",children:\"Resources:\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"#testing\",children:\"Testing:\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"fast-fourier-transformfft\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#fast-fourier-transformfft\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Fast Fourier Transform(FFT)\"]}),`\n`,(0,n.jsx)(e.p,{children:\"FFT is based on the principle that any signal(periodic or not) can be reconstructed by adding sinusoidal waves of different frequencies and amplitudes. Now FFT does this in reverse, where it splits an already existing wave into sinusoidal signals i.e the frequencies the wave contains.\"}),`\n`,(0,n.jsx)(a,{src:\"/static/images/blog/led-matrix/1.png\",alt:\"1\",width:\"auto\",height:\"auto\"}),`\n`,(0,n.jsx)(a,{src:\"/static/images/blog/led-matrix/2.png\",alt:\"2\",width:\"auto\",height:\"auto\"}),`\n`,(0,n.jsx)(e.p,{children:`Thus, we make use of FFT to identify which frequencies are present in any analog signal and also see which of those frequencies are the most dominating.\nComing to applying FFT to our audio visualiser, when we feed in an audio signal into an FFT we can find out the relative strengths of the frequencies.`}),`\n`,(0,n.jsx)(e.p,{children:\"Now let\\u2019s take a look at how FFT is applied.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"sampling-frequency-and-nyquist-theorem\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#sampling-frequency-and-nyquist-theorem\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Sampling Frequency and Nyquist Theorem\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Sampling frequency is the number of times we sample the wave per second.\"}),`\n`,(0,n.jsx)(e.p,{children:`The Nyquist-Shannon Sampling Theorem tells us that to be able to sample a signal, the sampling frequency needs to be at least twice the frequency of the signal we\\u2019re trying to sample.\nIn other words, the FFT will only be able to detect frequencies up to half the sampling frequency.`}),`\n`,(0,n.jsx)(e.p,{children:\"To explain how this works let\\u2019s use an example:\"}),`\n`,(0,n.jsxs)(e.p,{children:[`Say we want to sample an audio signal 10,000 times per second, i.e.\n`,(0,n.jsx)(e.strong,{children:\"Sampling frequency =10,000Hz.\"})]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:`Now we want to see how many samples we can record from a wave of a certain frequency.\nIf we take a 2kHz wave, the number of samples we get is 10,000/2000=5 samples per wave.\nThus for a wave of this frequency, 5 samples per wave is good enough to recreate the wave.`}),`\n`,(0,n.jsx)(e.li,{children:\"Now if we consider a wave of frequency 5kHz, we see that we only get 2 samples per wave.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Furthermore, if we take a wave of frequency 10kHz we see that we only get 1 sample per wave, and the signal can no longer be reconstructed as it results in a straight line.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Thus this is where the Nyquist theorem comes in and says that the maximum frequency we are able to sample is half of the sampling frequency.\"}),`\n`]}),`\n`,(0,n.jsx)(a,{src:\"/static/images/blog/led-matrix/3.png\",alt:\"3\",width:\"auto\",height:\"auto\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"number-of-samples\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#number-of-samples\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Number of Samples\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The FFT algorithm works with a finite number of samples. This number needs to be 2n where n is an integer (resulting in 32, 64, 128, etc). The larger this number is, the slower the algorithm will be. However, with many samples, you will get a larger resolution for the results.\"}),`\n`,(0,n.jsx)(a,{src:\"/static/images/blog/led-matrix/4.png\",alt:\"4\",width:\"auto\",height:\"auto\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"implementation\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#implementation\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Implementation:\"]}),`\n`,(0,n.jsx)(e.p,{children:`We can implement FFT into our projects conveniently using the arduinoFFT.h library, the documentation for which can be found online.\narduinoFFT - Arduino Reference`}),`\n`,(0,n.jsxs)(e.h2,{id:\"results-of-fft\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#results-of-fft\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Results of FFT:\"]}),`\n`,(0,n.jsx)(e.p,{children:`After we have achieved the results of FFT, we now have to understand them.\nLet\\u2019s say we used 16 samples and a sampling rate of 40kHz`}),`\n`,(0,n.jsx)(e.p,{children:\"Since we use 16 samples we get 16 bins.\"}),`\n`,(0,n.jsx)(e.p,{children:\"The term bins is related to the result of the FFT, where every element in the result array is a bin. One can say this is the \\u201Cresolution\\u201D of the FFT. Every bin represents a frequency interval, just like a histogram. The number of bins you get to use is half the amount of samples spanning the frequency range from zero to half the sampling rate as the other half of the values are negative and meaningless.\"}),`\n`,(0,n.jsx)(e.p,{children:\"In practicality, we can\\u2019t use the first bin either as this is swapped by DC. SO we only get to use 7 bins in the end for this case.\"}),`\n`,(0,n.jsx)(e.p,{children:`We can now map the bins as we wish to the number of bands we require.\nFor an audio signal, all the interesting stuff is towards the low end.\nTo help us do the calculations in mapping the bins to the bands, we can make use of the following spreadsheet. ( Courtesy: Scott Marley)`}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/s-marley/ESP32_FFT_VU/blob/master/FFT.xlsx\",children:\"https://github.com/s-marley/ESP32_FFT_VU/blob/master/FFT.xlsx\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"implementation-1\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#implementation-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Implementation:\"]}),`\n`,(0,n.jsx)(e.p,{children:`We can implement FFT into our projects conveniently using the arduinoFFT.h library, the documentation for which can be found online.\narduinoFFT - Arduino Reference\nResults of FFT:\nAfter we have achieved the results of FFT, we now have to understand them.\nLet\\u2019s say we used 16 samples and a sampling rate of 40kHz.\nSince we use 16 samples we get 16 bins.\nThe term bins is related to the result of the FFT, where every element in the result array is a bin. One can say this is the \\u201Cresolution\\u201D of the FFT. Every bin represents a frequency interval, just like a histogram. The number of bins you get to use is half the amount of samples spanning the frequency range from zero to half the sampling rate as the other half of the values are negative and meaningless.\nIn practicality, we can\\u2019t use the first bin either as this is swapped by DC. SO we only get to use 7 bins in the end for this case.\nWe can now map the bins as we wish to the number of bands we require.\nFor an audio signal, all the interesting stuff is towards the low end. To help us do the calculations in mapping the bins to the bands, we can make use of the following spreadsheet.`}),`\n`,(0,n.jsx)(e.p,{children:\"Now that we have understood the theory we can apply it to our code.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"fastled-in-a-nutshell\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#fastled-in-a-nutshell\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"FastLED in a nutshell\"]}),`\n`,(0,n.jsx)(e.p,{children:`FastLED is a fast, efficient, easy-to-use Arduino library for programming addressable LED strips and pixels such as WS2810, WS2811,\nLPD8806, Neopixel and more. In this project we have used WS2812B LED strip. The first step is to include the library and define constants.`}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-C\",children:[(0,n.jsxs)(e.span,{className:\"hljs-meta\",children:[\"#\",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"include\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"\u003cFastLED.h\u003e\"})]}),`\ndefine NUM_LEDS `,(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"64\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-comment\",children:\"// number of leds in the matrix\"}),`\ndefine DATA_PIN `,(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"4\"}),`\nNext, we `,(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"set\"}),\" up an \",(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"array\"}),` to store the LED data.\n\nCRGB leds[NUM_LEDS]\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"Then, we setup the LEDs.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-scss\",children:[\"void \",(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"setup\"}),`() {\n    FastLED`,(0,n.jsx)(e.span,{className:\"hljs-selector-class\",children:\".addLeds\"}),`(WS2812B, DATA_PIN)(leds, NUM_LEDS);\n}\n`]})}),`\n`,(0,n.jsxs)(e.h3,{id:\"writing-to-an-led\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#writing-to-an-led\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Writing to an LED\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-C\",children:[(0,n.jsx)(e.span,{className:\"hljs-type\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title hljs-function\",children:\"loop\"}),(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"()\"}),`{\n    leds[`,(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"0\"}),`] = CRGB::Red;\n    FastLED.show();\n    delay(`,(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"50\"}),`);\n}\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"This will set the first led to red. To make it blink, we can change the code to this\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-scss\",children:[\"void \",(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"loop\"}),`() {\n    leds`,(0,n.jsx)(e.span,{className:\"hljs-selector-attr\",children:\"[0]\"}),\" = CRGB::Red; FastLED\",(0,n.jsx)(e.span,{className:\"hljs-selector-class\",children:\".show\"}),`();\n    `,(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"delay\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"500\"}),`);\n    leds`,(0,n.jsx)(e.span,{className:\"hljs-selector-attr\",children:\"[0]\"}),` = CRGB::Black;\n    FastLED`,(0,n.jsx)(e.span,{className:\"hljs-selector-class\",children:\".show\"}),`();\n    `,(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"delay\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"500\"}),`);\n}\n`]})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"For writing to multiple LEDS, we can use loops.\"})}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-C\",children:[(0,n.jsx)(e.span,{className:\"hljs-type\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title hljs-function\",children:\"loop\"}),(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"()\"}),\"{ \",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"for\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-type\",children:\"int\"}),\" i=\",(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"0\"}),`; i\u003cNUM_LEDS; i++){ leds[i] = CRGB::Red;\nFastLED.show(); delay(`,(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"50\"}),`); } }\n`]})}),`\n`,(0,n.jsx)(e.p,{children:`You can also display various patterns using FastLED.\nFor more details, refer:`}),`\n`,(0,n.jsxs)(e.h2,{id:\"resources\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#resources\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Resources:\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Scott Marley's \",(0,n.jsx)(e.a,{href:\"https://github.com/s-marley\",children:\"github\"}),\" is an amazing resource for all things FastLED. He also has a \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/c/ScottMarley/playlists\",children:\"youtube channel\"}),\" explaining his projects.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"testing\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#testing\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Testing:\"]})]});return i?(0,n.jsx)(i,Object.assign({},s,{children:t})):t}var F=y;return N;})();\n;return Component.default;"},"_id":"blog/led-matrix.mdx","_raw":{"sourceFilePath":"blog/led-matrix.mdx","sourceFileName":"led-matrix.mdx","sourceFileDir":"blog","bodyType":"mdx","flattenedPath":"blog/led-matrix"},"type":"Blog","readingTime":{"text":"6 min read","minutes":5.445,"time":326700,"words":1089},"slug":"led-matrix"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"led-matrix"},"buildId":"StFUEQfHxZAGBwgxCGBgG","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>